<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<!-- 
Hibernate -> ORM (object relation mapping) -> query빌더 (쿼리를 만들어줌)
MyBatis -> 속칭 QRM (query relation mapping) -> data framework(쿼리를 만들어 주지는 않음)
-->

<mapper namespace="com.newlecture.web.dao.NoticeDao">
	<select id="getViewList" resultType="com.newlecture.web.entity.NoticeView">
		select * from Notice_View
		where ${field} like '%${query}%'
		and num between #{page}*10-9 and #{page}*10
	</select>
	
	<select id="getList" resultType="com.newlecture.web.entity.Notice">
		select id, title, content, writer_id as writerId, regdate, hit from Notice
	</select>
	
	<select id="getNoticeView" resultType="com.newlecture.web.entity.NoticeView">
		select * from Notice_View 
		where id=#{param1}
	</select>
	
	<select id="getNotice" resultType="com.newlecture.web.entity.Notice">
		select id, title, content, writer_id as writerId, regdate, hit from Notice
		where id=#{param1}
	</select>
	
	<insert id="insert" parameterType="com.newlecture.web.entity.Notice">
		insert into Notice(id, title, content, writer_Id) 
		values(NOTICE_SEQ.NEXTVAL, #{title}, #{content}, #{writerId})
		
		<!-- 
		${}, #{} : com.newlecture.web.entity.Notice 의 getter 
		values( ${title}, #{content} ) => values(hello, 'hello');
		 -> values( '${title}', #{content} )

		${} 의 일반적인 사용
		where ${field} = #{query}  => where title = 'hello'
		-->
		
	</insert>
	
	<update id="update" parameterType="com.newlecture.web.entity.Notice">
		update Notice
		set title=#{title}, 
			content=#{content},
			writer_id=#{writerId},
			hit=#{hit}
		where id=#{id}
	</update>
	
	
</mapper>